<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Regalia Style — Catalog</title>
<style>
:root{
  --brown:#5A3E1B;
  --green:#0A662D;
  --gold:#D4AF37;
  --card:#ffffff;
  --muted:#666;
  --accent:#8B4513;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,Arial,Helvetica,sans-serif;background:#f8f8f8;color:#222}
a{color:inherit;text-decoration:none}
header.site-header{
  position:sticky;top:0;z-index:60;
  padding:14px 16px;display:flex;align-items:center;justify-content:space-between;
  background:linear-gradient(90deg,var(--brown),var(--green),var(--gold));
  background-size:300% 300%; animation:grad 14s ease-in-out infinite;
  color:#fff; box-shadow:0 6px 18px rgba(10,10,10,0.08)
}
@keyframes grad{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
.site-header h1{margin:0;font-size:18px;letter-spacing:0.6px}
.header-right{display:flex;gap:8px;align-items:center}
.header-right button{background:rgba(255,255,255,0.95);border:0;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700;color:var(--brown)}
.header-right .sub-btn{background:transparent;border:1px solid rgba(255,255,255,0.25);color:#fff}

/* hero highlights */
.hero{max-width:1200px;margin:14px auto;padding:8px 18px;overflow:hidden;position:relative}
.highlight-track{display:flex;transition:transform 0.1s linear;white-space:nowrap}
.highlight-track img{height:300px;border-radius:10px;margin-right:12px;cursor:pointer;}

/* categories */
.categories{display:flex;gap:12px;max-width:1200px;margin:8px auto;padding:0 18px}
.cat-btn{flex:1;background:#fff;border-radius:10px;padding:14px;text-align:center;box-shadow:0 6px 18px rgba(0,0,0,0.04);cursor:pointer;border:1px solid var(--muted);font-weight:700}
.cat-btn:hover{background:var(--gold);color:#fff}

/* catalog grid */
.catalog{max-width:1200px;margin:18px auto;padding:0 18px;display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:18px}
.product{background:var(--card);border-radius:10px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;flex-direction:column;cursor:pointer}
.prod-img{width:100%;height:260px;object-fit:cover;border-radius:8px}
.prod-title{font-size:15px;margin:10px 0 6px;color:var(--brown)}
.prod-desc{font-size:13px;color:#444;min-height:40px}
.prod-price{display:flex;align-items:center;gap:8px;margin-top:6px}
.price-sale{color:var(--green);font-weight:800}
.price-old{text-decoration:line-through;color:var(--muted);font-size:13px}

/* detail modal */
.dmodal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);align-items:center;justify-content:center;z-index:300;padding:18px;overflow:auto}
.dmodal-inner{background:#fff;border-radius:10px;max-width:1000px;width:100%;display:flex;gap:18px;max-height:95vh;overflow:auto}
.dmodal-left{flex:1;position:relative}
.dmodal-left img{width:100%;border-radius:10px;object-fit:cover;transition:transform 0.2s ease}
#eyeBtn{position:absolute;top:8px;right:8px;padding:6px;border:0;background:rgba(0,0,0,0.3);color:#fff;border-radius:50%;cursor:pointer}
.dmodal-right{flex:1;min-width:280px;color:#222}
.dmodal-right h2{color:var(--brown);margin-top:0}
.dmodal-right p.note{font-size:12px;color:#666;margin:8px 0}

/* colors */
.dcolors{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0}

/* breakdown & stock table */
#dbreakdown, #dstocktable{width:100%;border-collapse:collapse;margin:8px 0}
#dbreakdown td, #dstocktable td, #dstocktable th{border:1px solid #ccc;padding:6px;text-align:center}

/* best-selling loop */
.best-row{max-width:1200px;margin:12px auto;padding:0 18px;background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
.best-track{display:flex;gap:12px;overflow:hidden;align-items:center;white-space:nowrap}
.best-track .mini{min-width:180px;background:#f6f6f6;border-radius:8px;padding:8px;text-align:center;cursor:pointer;}

/* small */
@media(max-width:800px){
  .dmodal-inner{flex-direction:column}
  .prod-img{height:200px}
  .highlight-track img{height:200px}
}
</style>
</head>
<body>

<header class="site-header">
  <h1>Regalia Style</h1>
  <div class="header-right">
    <button class="sub-btn" id="subscribeFB">Facebook</button>
    <button class="sub-btn" id="subscribeIG">Instagram</button>
    <button class="sub-btn" id="subscribeYT">YouTube</button>
    <button id="openSubs" style="margin-left:8px;background:#fff;color:var(--brown);padding:8px 10px;border-radius:8px;border:0;font-weight:800">Subscribe</button>
  </div>
</header>

<!-- Highlights -->
<section class="hero">
  <div class="highlight-track" id="highlightTrack"></div>
</section>

<!-- Categories -->
<section class="categories">
  <div class="cat-btn" data-cat="branding">Branding</div>
  <div class="cat-btn" data-cat="branded">Branded</div>
  <div class="cat-btn" data-cat="plains">Plains</div>
</section>

<!-- Product catalog -->
<main>
  <div class="catalog" id="catalog"></div>
  <div id="loading" style="text-align:center;padding:18px;color:var(--muted)">Loading more...</div>
</main>

<!-- Detail Modal -->
<div class="dmodal" id="dmodal">
  <div class="dmodal-inner">
    <div class="dmodal-left">
      <img id="dimg" src="">
      <button id="eyeBtn">??</button>
    </div>
    <div class="dmodal-right">
      <button id="closeDmodal" style="float:right;border:0;background:transparent;font-size:22px;cursor:pointer">?</button>
      <h2 id="dtitle"></h2>
      <p class="note">Please note: colours displayed serve as indication, not exact.</p>
      <div class="dcolors" id="dcolors"></div>
      <table id="dbreakdown"></table>
      <table id="dstocktable"></table>
    </div>
  </div>
</div>

<!-- Best-selling -->
<section class="best-row">
  <div class="best-track" id="bestTrack"></div>
</section>

<script>
// ===== PRODUCT DATA =====
const products=[
{id:'p1',title:'Base Hoodie - Grey',price:550,salePrice:490,desc:'Stylish hoodie',img:'https://res.cloudinary.com/demo/image/upload/kitten.jpg',cat:'branding',colors:['#888','#555','#333'],sizes:{XS:10,S:12,M:8,L:5,XL:4,XXL:2}},
{id:'p2',title:'Regalia Puffer - Black',price:980,salePrice:850,desc:'Warm puffer',img:'https://res.cloudinary.com/demo/image/upload/flower.jpg',cat:'branded',colors:['#000','#222','#444'],sizes:{S:5,M:8,L:6,XL:3}},
{id:'p3',title:'Heritage Tee - Green',price:220,salePrice:0,desc:'Soft cotton tee',img:'https://res.cloudinary.com/demo/image/upload/journal.jpg',cat:'plains',colors:['#0A662D','#D4AF37'],sizes:{S:12,M:15,L:10,XL:5}},
{id:'p4',title:'Classic Cap',price:120,salePrice:99,desc:'Adjustable cap',img:'https://res.cloudinary.com/demo/image/upload/cat.jpg',cat:'plains',colors:['#000','#555'],sizes:{M:5,L:2,XL:1}},
];

// ===== HIGHLIGHT LOOP =====
const highlightTrack=document.getElementById('highlightTrack');
products.slice(0,5).forEach(p=>{
  const img=document.createElement('img');
  img.src=p.img; img.alt=p.title;
  img.onclick=()=>openDetail(p);
  highlightTrack.appendChild(img);
});
let hlPos=0;
function moveHighlights(){ hlPos-=1; if(Math.abs(hlPos)>=highlightTrack.scrollWidth/2) hlPos=0; highlightTrack.style.transform=`translateX(${hlPos}px)`;}
setInterval(moveHighlights,30);

// ===== CREATE CARD =====
const catalog=document.getElementById('catalog');
let pointer=0,perLoad=20;
function createCard(p){
  const el=document.createElement('div'); el.className='product';
  el.onclick=()=>openDetail(p);
  el.innerHTML=`<img class="prod-img" src="${p.img}" alt="${p.title}"><div class="prod-title">${p.title}</div>
  <div class="prod-desc">${p.desc}</div>
  <div class="prod-price"><div class="price-sale">${p.salePrice>0?p.salePrice:p.price} R</div>${p.salePrice>0?'<div class="price-old">'+p.price+' R</div>':''}</div>`;
  return el;
}
function loadBatch(){
  for(let i=0;i<perLoad;i++){
    const idx=(pointer+i)%products.length;
    catalog.appendChild(createCard(products[idx]));
  }
  pointer=(pointer+perLoad)%products.length;
}
loadBatch();
window.addEventListener('scroll',()=>{if((window.innerHeight+window.scrollY)>=document.body.offsetHeight-500){loadBatch();}});

// ===== DETAIL MODAL =====
const dmodal=document.getElementById('dmodal');
const dimg=document.getElementById('dimg');
const dcolors=document.getElementById('dcolors');
const eyeBtn=document.getElementById('eyeBtn');

let zoomed=true;
eyeBtn.onclick=()=>{zoomed=!zoomed; dimg.style.transform=zoomed?'scale(1.8)':'scale(1)';};
document.querySelector('.dmodal-left').addEventListener('mousemove',e=>{
  if(!zoomed) return;
  const rect=dimg.getBoundingClientRect();
  const x=(e.clientX-rect.left)/rect.width*100;
  const y=(e.clientY-rect.top)/rect.height*100;
  dimg.style.transformOrigin=`${x}% ${y}%`;
  dimg.style.transform='scale(1.8)';
});
document.querySelector('.dmodal-left').addEventListener('mouseleave',()=>{dimg.style.transform='scale(1)'; dimg.style.transformOrigin='center center';});

document.getElementById('closeDmodal').onclick=()=>dmodal.style.display='none';

function openDetail(p){
  dmodal.style.display='flex';
  dimg.src=p.img;
  document.getElementById('dtitle').innerText=p.title;

  // colors
  dcolors.innerHTML='';
  p.colors.slice(0,14).forEach(c=>{
    const d=document.createElement('div'); d.style.background=c; d.style.width='28px'; d.style.height='28px';
    d.style.border='1px solid #ccc'; d.style.borderRadius='50%'; d.style.cursor='pointer';
    d.onclick=()=>dimg.src=p.img;
    dcolors.appendChild(d);
  });

  // breakdown
  const breakdown=document.getElementById('dbreakdown');
  breakdown.innerHTML=`<tr><td>Qty 1-24</td><td>${Math.round((p.salePrice>0?p.salePrice:p.price)*1.15)} R</td></tr>
  <tr><td>Qty 25-100</td><td>${Math.round((p.salePrice>0?p.salePrice:p.price*0.9)*1.15)} R</td></tr>
  <tr><td colspan="2">Including VAT 15%</td></tr>`;

  // stock table
  const stockTbl=document.getElementById('dstocktable');
  stockTbl.innerHTML='<tr><th>Color</th><th>Size</th><th>Stock</th><th>Quantity</th><th>Action</th></tr>';
  p.colors.forEach(c=>{
    Object.entries(p.sizes).forEach(([size,stock])=>{
      const row=document.createElement('tr');
      row.innerHTML=`<td>${c}</td><td>${size}</td><td>${stock}</td>
      <td><button onclick="this.nextElementSibling.innerText=Math.max(Number(this.nextElementSibling.innerText)-1,1)">-</button>
      <span>1</span>
      <button onclick="this.previousElementSibling.innerText=Number(this.previousElementSibling.innerText)+1">+</button></td>
      <td><button onclick="alert('Added '+this.parentElement.parentElement.querySelector('span').innerText+' items to cart')">Add to Cart</button></td>`;
      stockTbl.appendChild(row);
    });
  });
}

// ===== BEST-SELLING LOOP =====
const bestTrack=document.getElementById('bestTrack');
products.slice(0,5).forEach(p=>{
  const mini=document.createElement('div'); mini.className='mini';
  mini.innerHTML=`<img src="${p.img}" style="width:100%;height:120px;object-fit:cover;border-radius:6px"/><div>${p.title}</div><div style="color:var(--green);font-weight:700">${p.salePrice>0?p.salePrice:p.price} R</div>`;
  mini.onclick=()=>openDetail(p);
  bestTrack.appendChild(mini);
});
let bestPos=0;
function moveBest(){ bestPos-=2; if(Math.abs(bestPos)>=bestTrack.scrollWidth/2) bestPos=0; bestTrack.style.transform=`translateX(${bestPos}px)`;}
setInterval(moveBest,50);

// ===== CATEGORY FILTER =====
document.querySelectorAll('.cat-btn').forEach(btn=>{btn.onclick=()=>{
  const cat=btn.dataset.cat; catalog.innerHTML=''; pointer=0;
  const filtered=products.filter(p=>p.cat===cat);
  filtered.forEach(p=>catalog.appendChild(createCard(p)));
}});

// ===== SUBSCRIBE =====
const subModal=document.createElement('div'); // add your existing subscribe modal code here if needed

</script>
</body>
</html>